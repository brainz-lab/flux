<% content_for(:title) { "MCP Setup" } %>

<div class="space-y-8">
  <div>
    <h1 class="text-[22px] font-semibold tracking-tight flux-text">MCP Integration</h1>
    <p class="mt-1 text-[13px] flux-text-muted">Connect Flux to Claude Desktop or Cursor</p>
  </div>

  <div class="space-y-6">
    <div class="px-6 py-5 rounded-xl flux-card">
      <h2 class="text-[15px] font-medium mb-4 flux-text">Claude Desktop Configuration</h2>
      <p class="text-[13px] mb-3 flux-text-secondary">Add this to your <code class="px-1.5 py-0.5 rounded flux-bg-subtle flux-text">claude_desktop_config.json</code>:</p>
      <pre class="p-4 rounded-lg text-[13px] overflow-x-auto flux-code"><code>{
  "mcpServers": {
    "flux": {
      "command": "curl",
      "args": [
        "-X", "POST",
        "-H", "Content-Type: application/json",
        "-H", "Authorization: Bearer <%= @project.api_key %>",
        "<%= request.base_url %>/mcp/rpc"
      ]
    }
  }
}</code></pre>
    </div>

    <div class="px-6 py-5 rounded-xl flux-card">
      <h2 class="text-[15px] font-medium mb-4 flux-text">Available Tools</h2>
      <div class="space-y-3">
        <% @tools.each do |tool| %>
          <div class="flex items-start gap-3 p-3 rounded-lg flux-bg-muted">
            <code class="text-[13px] font-medium px-2 py-0.5 rounded flux-bg-subtle flux-text"><%= tool[:name] %></code>
            <span class="text-[13px] flux-text-secondary"><%= tool[:description] %></span>
          </div>
        <% end %>
      </div>
    </div>

    <div class="px-6 py-5 rounded-xl flux-card">
      <h2 class="text-[15px] font-medium mb-4 flux-text">Example Usage</h2>
      <p class="text-[13px] mb-3 flux-text-secondary">Once connected, you can ask Claude questions like:</p>
      <ul class="space-y-2 text-[13px] flux-text-secondary">
        <li class="flex items-start gap-2">
          <span class="flux-text-disabled">*</span>
          "Show me all signup events from today"
        </li>
        <li class="flex items-start gap-2">
          <span class="flux-text-disabled">*</span>
          "What's the current value of api.requests metric?"
        </li>
        <li class="flex items-start gap-2">
          <span class="flux-text-disabled">*</span>
          "Are there any anomalies detected?"
        </li>
        <li class="flex items-start gap-2">
          <span class="flux-text-disabled">*</span>
          "Track a user signup event for user 123"
        </li>
      </ul>
    </div>
  </div>
</div>
